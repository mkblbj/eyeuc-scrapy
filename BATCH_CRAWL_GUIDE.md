# ðŸ“š åˆ†æ‰¹æŠ“å–ä½¿ç”¨æŒ‡å—

## ðŸŽ¯ ä¸ºä»€ä¹ˆéœ€è¦åˆ†æ‰¹æŠ“å–ï¼Ÿ

å¯¹äºŽå¤§åž‹åˆ—è¡¨ï¼ˆå¦‚ list 182ï¼Œæœ‰ 2386 ä¸ª modsï¼Œ100 é¡µï¼‰ï¼Œä¸€æ¬¡æ€§æŠ“å–å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

1. **é•¿æ—¶é—´è¿è¡Œï¼ˆ1+ å°æ—¶ï¼‰**ï¼šç½‘ç»œæ³¢åŠ¨ã€æœåŠ¡å™¨å¼‚å¸¸çš„é£Žé™©å¢žåŠ 
2. **å¤šåˆ†æ”¯ mods çš„å¤„ç†**ï¼šæŸäº›åˆ†æ”¯è¯·æ±‚å¤±è´¥ä¼šå¯¼è‡´æ•´ä¸ª mod è¢«ä¸¢å¼ƒ
3. **éš¾ä»¥æ¢å¤**ï¼šå¦‚æžœä¸­é€”å¤±è´¥ï¼Œéœ€è¦é‡æ–°å¼€å§‹
4. **èµ„æºå ç”¨**ï¼šé•¿æ—¶é—´å ç”¨å†…å­˜å’Œç½‘ç»œèµ„æº

**åˆ†æ‰¹æŠ“å–çš„ä¼˜åŠ¿**ï¼š
- âœ… æ¯æ‰¹åªéœ€ 3-5 åˆ†é’Ÿ
- âœ… å‡ºé”™å¯ä»¥å•ç‹¬é‡è·‘æŸä¸€æ‰¹
- âœ… å¯ä»¥å¹¶è¡Œè¿è¡Œå¤šæ‰¹ï¼ˆä¸åŒæœºå™¨/è¿›ç¨‹ï¼‰
- âœ… æ›´å®¹æ˜“ç›‘æŽ§è¿›åº¦

## ðŸ“– ä½¿ç”¨æ–¹æ³•

### 1. åŸºæœ¬ç”¨æ³•

```bash
# æŠ“å– list 182 çš„ç¬¬ 1-5 é¡µ
scrapy crawl eyeuc_mods \
    -a cookies=cookies.json \
    -a list_ids=182 \
    -a start_page=1 \
    -a end_page=5

# æŠ“å– list 182 çš„ç¬¬ 6-10 é¡µ
scrapy crawl eyeuc_mods \
    -a cookies=cookies.json \
    -a list_ids=182 \
    -a start_page=6 \
    -a end_page=10
```

### 2. æ‰¹é‡æŠ“å–è„šæœ¬

åˆ›å»ºä¸€ä¸ª shell è„šæœ¬ `batch_crawl_182.sh`ï¼š

```bash
#!/bin/bash
# åˆ†æ‰¹æŠ“å– list 182ï¼ˆå…± 100 é¡µï¼Œæ¯æ‰¹ 5 é¡µï¼‰

LIST_ID=182
BATCH_SIZE=5
TOTAL_PAGES=100

for start in $(seq 1 $BATCH_SIZE $TOTAL_PAGES); do
    end=$((start + BATCH_SIZE - 1))
    
    echo "========================================"
    echo "æŠ“å–ç¬¬ $start-$end é¡µ (æ‰¹æ¬¡ $((start / BATCH_SIZE + 1))/20)"
    echo "========================================"
    
    scrapy crawl eyeuc_mods \
        -a cookies=cookies.json \
        -a list_ids=$LIST_ID \
        -a start_page=$start \
        -a end_page=$end
    
    # æ£€æŸ¥é€€å‡ºçŠ¶æ€
    if [ $? -ne 0 ]; then
        echo "âŒ æ‰¹æ¬¡ $start-$end å¤±è´¥ï¼Œåœæ­¢æŠ“å–"
        exit 1
    fi
    
    echo "âœ… æ‰¹æ¬¡ $start-$end å®Œæˆ"
    echo ""
    
    # å¯é€‰ï¼šæ‰¹æ¬¡ä¹‹é—´ä¼‘æ¯ 10 ç§’
    sleep 10
done

echo "ðŸŽ‰ æ‰€æœ‰æ‰¹æ¬¡å®Œæˆï¼"
```

è¿è¡Œï¼š

```bash
chmod +x batch_crawl_182.sh
./batch_crawl_182.sh
```

### 3. åˆå¹¶ç»“æžœ

æŠ“å–å®Œæ‰€æœ‰æ‰¹æ¬¡åŽï¼Œä½¿ç”¨ `merge_batches.py` åˆå¹¶ï¼š

```bash
# æ–¹æ³• 1ï¼šæŒ‡å®š list_idï¼ˆæŽ¨èï¼‰
python merge_batches.py 182

# æ–¹æ³• 2ï¼šæŒ‡å®šæ–‡ä»¶æ¨¡å¼
python merge_batches.py "per_list_output/eyeuc_list182_*_p*.jsonl"
```

**è¾“å‡º**ï¼š
```
ðŸ“„ æ‰¾åˆ° 20 ä¸ªæ–‡ä»¶:
  - eyeuc_list182_nba2k25_p1-5_20251017_114845.jsonl
  - eyeuc_list182_nba2k25_p6-10_20251017_115256.jsonl
  ...
  - eyeuc_list182_nba2k25_p96-100_20251017_123456.jsonl

ðŸ”„ åˆå¹¶ä¸­...

âœ… åˆå¹¶å®Œæˆ!
  - æ€» items: 2386
  - é‡å¤ï¼ˆå·²åŽ»é™¤ï¼‰: 15
  - è¾“å‡ºæ–‡ä»¶: per_list_output/eyeuc_list182_nba2k25_merged_20251017_124500.jsonl
```

## ðŸ”§ é«˜çº§ç”¨æ³•

### å¹¶è¡ŒæŠ“å–ï¼ˆå¤šè¿›ç¨‹ï¼‰

å¦‚æžœä½ æœ‰å¤šæ ¸ CPU æˆ–å¤šå°æœºå™¨ï¼Œå¯ä»¥å¹¶è¡Œè¿è¡Œå¤šæ‰¹ï¼š

```bash
# ç»ˆç«¯ 1ï¼šæŠ“å–ç¬¬ 1-10 é¡µ
scrapy crawl eyeuc_mods -a list_ids=182 -a start_page=1 -a end_page=10 &

# ç»ˆç«¯ 2ï¼šæŠ“å–ç¬¬ 11-20 é¡µ
scrapy crawl eyeuc_mods -a list_ids=182 -a start_page=11 -a end_page=20 &

# ç»ˆç«¯ 3ï¼šæŠ“å–ç¬¬ 21-30 é¡µ
scrapy crawl eyeuc_mods -a list_ids=182 -a start_page=21 -a end_page=30 &

# ç­‰å¾…æ‰€æœ‰è¿›ç¨‹å®Œæˆ
wait

# åˆå¹¶
python merge_batches.py 182
```

### åªé‡è·‘å¤±è´¥çš„æ‰¹æ¬¡

å¦‚æžœæŸä¸€æ‰¹æ¬¡å¤±è´¥ï¼ˆå¦‚ç¬¬ 46-50 é¡µï¼‰ï¼Œåªéœ€é‡è·‘é‚£ä¸€æ‰¹ï¼š

```bash
scrapy crawl eyeuc_mods \
    -a cookies=cookies.json \
    -a list_ids=182 \
    -a start_page=46 \
    -a end_page=50
```

### è‡ªå®šä¹‰æ‰¹æ¬¡å¤§å°

æ ¹æ®åˆ—è¡¨çš„å¤æ‚åº¦è°ƒæ•´æ‰¹æ¬¡å¤§å°ï¼š

- **ç®€å•åˆ—è¡¨**ï¼ˆå°‘é‡å¤šåˆ†æ”¯ modsï¼‰ï¼š10-20 é¡µ/æ‰¹
- **ä¸­ç­‰åˆ—è¡¨**ï¼š5-10 é¡µ/æ‰¹
- **å¤æ‚åˆ—è¡¨**ï¼ˆå¤§é‡å¤šåˆ†æ”¯ modsï¼‰ï¼š3-5 é¡µ/æ‰¹

## ðŸ“Š è¾“å‡ºæ–‡ä»¶

### æ‰¹æ¬¡æ–‡ä»¶

æ¯ä¸ªæ‰¹æ¬¡çš„è¾“å‡ºæ–‡ä»¶ååŒ…å«é¡µæ•°èŒƒå›´ï¼š

```
eyeuc_list182_nba2k25_p1-5_20251017_114845.jsonl
eyeuc_list182_nba2k25_p6-10_20251017_115256.jsonl
eyeuc_list182_nba2k25_p11-15_20251017_120130.jsonl
...
```

### åˆå¹¶æ–‡ä»¶

åˆå¹¶åŽçš„æ–‡ä»¶ååŒ…å« `merged` æ ‡è¯†ï¼š

```
eyeuc_list182_nba2k25_merged_20251017_124500.jsonl
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¿æŒ cookies æœ‰æ•ˆ**ï¼šé•¿æ—¶é—´æŠ“å–æ—¶ï¼Œcookies å¯èƒ½è¿‡æœŸï¼Œå»ºè®®æ¯æ‰¹æ›´æ–° cookies
2. **ç½‘ç»œç¨³å®šæ€§**ï¼šå¦‚æžœç½‘ç»œä¸ç¨³å®šï¼Œå‡å°æ‰¹æ¬¡å¤§å°ï¼ˆå¦‚ 3 é¡µ/æ‰¹ï¼‰
3. **åŽ»é‡**ï¼šåˆå¹¶è„šæœ¬ä¼šè‡ªåŠ¨åŽ»é‡ï¼ˆåŸºäºŽ `mid`ï¼‰ï¼Œæ‰€ä»¥é‡è·‘æ‰¹æ¬¡ä¸ä¼šäº§ç”Ÿé‡å¤æ•°æ®
4. **æ–‡ä»¶å‘½å**ï¼šç¡®ä¿æ¯æ‰¹çš„æ–‡ä»¶åä¸­åŒ…å« `_p{start}-{end}_` æ ¼å¼ï¼Œå¦åˆ™åˆå¹¶è„šæœ¬æ— æ³•è¯†åˆ«

## ðŸš€ å®Œæ•´ç¤ºä¾‹

### æŠ“å– list 182ï¼ˆ2386 ä¸ª modsï¼Œ100 é¡µï¼‰

```bash
# 1. åˆ›å»ºæ‰¹æ¬¡è„šæœ¬
cat > batch_crawl.sh << 'EOF'
#!/bin/bash
for start in {1..100..5}; do
    end=$((start + 4))
    echo "æŠ“å–ç¬¬ $start-$end é¡µ..."
    scrapy crawl eyeuc_mods -a cookies=cookies.json -a list_ids=182 -a start_page=$start -a end_page=$end
    sleep 10
done
EOF

# 2. è¿è¡Œ
chmod +x batch_crawl.sh
./batch_crawl.sh

# 3. åˆå¹¶
python merge_batches.py 182

# 4. éªŒè¯
python -c "
import json
with open('per_list_output/eyeuc_list182_nba2k25_merged_*.jsonl', 'r') as f:
    count = sum(1 for line in f if line.strip())
    print(f'æ€»è®¡: {count} ä¸ª items')
"
```

## ðŸ“ˆ é¢„ä¼°æ—¶é—´

æ ¹æ®æµ‹è¯•ï¼Œæ¯æ‰¹ï¼ˆ5 é¡µï¼Œ~120 ä¸ª modsï¼‰éœ€è¦çº¦ **3-4 åˆ†é’Ÿ**ã€‚

å¯¹äºŽ list 182ï¼ˆ100 é¡µï¼Œ20 æ‰¹ï¼‰ï¼š
- **é¡ºåºæŠ“å–**ï¼š20 æ‰¹ Ã— 4 åˆ†é’Ÿ = **80 åˆ†é’Ÿ**
- **å¹¶è¡ŒæŠ“å–ï¼ˆ4 è¿›ç¨‹ï¼‰**ï¼š20 åˆ†é’Ÿ
- **åˆå¹¶æ—¶é—´**ï¼š< 1 åˆ†é’Ÿ

## ðŸŽ¯ æœ€ä½³å®žè·µ

1. **å…ˆæµ‹è¯•å°æ‰¹æ¬¡**ï¼šå…ˆæŠ“ 1-5 é¡µï¼Œç¡®è®¤æ²¡é—®é¢˜å†å¤§æ‰¹é‡æŠ“å–
2. **è®¾ç½®æ—¥å¿—çº§åˆ«**ï¼š`-s LOG_LEVEL=WARNING` å‡å°‘æ—¥å¿—è¾“å‡º
3. **ç›‘æŽ§è¿›åº¦**ï¼šä½¿ç”¨ `tail -f` å®žæ—¶æŸ¥çœ‹æ—¥å¿—
4. **å¤‡ä»½ cookies**ï¼šå®šæœŸæ›´æ–° `cookies.json`ï¼Œé¿å…è¿‡æœŸ
5. **åˆ†æ—¶æ®µæŠ“å–**ï¼šé¿å¼€ç½‘ç«™é«˜å³°æœŸï¼ˆå¦‚æ™šä¸ŠæŠ“å–ï¼‰

## ðŸ› å¸¸è§é—®é¢˜

### Q: åˆå¹¶æ—¶æç¤º"æœªæ‰¾åˆ°æ‰¹æ¬¡æ–‡ä»¶"ï¼Ÿ

A: æ£€æŸ¥æ–‡ä»¶åæ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œå¿…é¡»åŒ…å« `_p{start}-{end}_` æ¨¡å¼ã€‚

### Q: åˆå¹¶åŽçš„æ€»æ•°å°‘äºŽé¢„æœŸï¼Ÿ

A: å¯èƒ½æœ‰é‡å¤çš„ `mid`ï¼Œåˆå¹¶è„šæœ¬ä¼šè‡ªåŠ¨åŽ»é‡ã€‚æ£€æŸ¥æ—¥å¿—ä¸­çš„"é‡å¤ï¼ˆå·²åŽ»é™¤ï¼‰"æ•°é‡ã€‚

### Q: æŸä¸€æ‰¹æ¬¡æŠ“å–å¤±è´¥æ€Žä¹ˆåŠžï¼Ÿ

A: åªéœ€é‡è·‘é‚£ä¸€æ‰¹ï¼Œåˆå¹¶æ—¶ä¼šè‡ªåŠ¨åŽ»é‡ï¼š

```bash
scrapy crawl eyeuc_mods -a list_ids=182 -a start_page=46 -a end_page=50
```

### Q: å¯ä»¥æ”¹å˜æ‰¹æ¬¡å¤§å°å—ï¼Ÿ

A: å¯ä»¥ï¼è°ƒæ•´ `start_page` å’Œ `end_page` çš„é—´éš”å³å¯ï¼š

```bash
# 10 é¡µ/æ‰¹
-a start_page=1 -a end_page=10

# 3 é¡µ/æ‰¹
-a start_page=1 -a end_page=3
```

## ðŸŽ‰ æ€»ç»“

åˆ†æ‰¹æŠ“å–æ˜¯å¤„ç†å¤§åž‹åˆ—è¡¨çš„**æœ€ä½³å®žè·µ**ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

- âœ… **ç¨³å®šæ€§é«˜**ï¼šå•æ‰¹å¤±è´¥ä¸å½±å“å…¶ä»–æ‰¹æ¬¡
- âœ… **æ˜“äºŽæ¢å¤**ï¼šå¯ä»¥å•ç‹¬é‡è·‘å¤±è´¥çš„æ‰¹æ¬¡
- âœ… **è¿›åº¦å¯æŽ§**ï¼šæ¸…æ™°çœ‹åˆ°æ¯æ‰¹çš„è¿›åº¦
- âœ… **å¹¶è¡ŒåŒ–**ï¼šå¯ä»¥å¤šè¿›ç¨‹/å¤šæœºå™¨å¹¶è¡ŒæŠ“å–

å»ºè®®å¯¹äºŽ **è¶…è¿‡ 20 é¡µ** çš„åˆ—è¡¨ï¼Œéƒ½ä½¿ç”¨åˆ†æ‰¹æŠ“å–ï¼

